{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,oDAmCA,SAASC,IACPC,OAAOC,iBAAiB,UAAWC,GACnCC,EAAAC,KAAKC,UAAUC,UAAUC,OAAO,aAChCJ,EAAAC,KAAKI,KAAKF,UAAUC,OAAO,aACvBJ,EAAAC,KAAKC,UAAUC,UAAUG,SAAS,cACpCT,OAAOU,oBAAoB,UAAWR,E,CAU1C,SAASA,EAAWS,GACF,WAAZA,EAAIC,KACNb,G,CA3CJI,EAAAC,KAAKS,YAAYZ,iBAAiB,SAIlC,SAAmBU,GACjB,GAAIA,EAAIG,gBAAkBH,EAAII,OAC5B,OAEFC,SAASC,cAAc,cAAcC,UAAY,GAEjD,MAAMC,EAAcR,EAAII,OAAOK,QAAQ,YACjCC,EAAYC,OAAOH,EAAYI,QAAQC,KAC7C,EAAAC,EAAAC,YAAWL,GACRM,MAAKC,KACJ,EAAA/B,EAAAgC,mBAAkBD,EAAK,IAExBE,SAAQ,KAAM,EAAAC,EAAAC,iBACjB,EAAAD,EAAAE,aAEA9B,EAAAC,KAAK8B,WAAWjC,iBAAiB,SAAS,KAAM,EAAAkC,EAAAC,cAAaf,IAAY,CACvEgB,MAAM,IAGRtC,G,IAtBFI,EAAAC,KAAKkC,oBAAoBrC,iBAAiB,QAASF,GACnDI,EAAAC,KAAKmC,eAAetC,iBAAiB,SAiCrC,SAAyBU,GACnBA,EAAIG,gBAAkBH,EAAII,QAC5BhB,G,IAWJI,EAAAC,KAAKoC,cAAcvC,iBAAiB,SAAS,KAC3Ce,SAASC,cAAc,oBAClBD,SAASC,cAAc,kBAAkBC,UAAY,GAAE","sources":["src/js/slider-modal.js"],"sourcesContent":["import { renderMarkupModal } from './render-modal';\nimport { fetchModal } from './fetch-modal';\nimport { spinnerOn, spinnerOff } from './spinner';\nimport { fetchTrailer } from './modal-trailer';\nconst BASE_URL = 'https://api.themoviedb.org/3/movie/';\nconst API_KEY = 'fa9433e46ed4abfaeb75bcf31f473feb';\n\nimport { refs } from './refs';\n\nrefs.sliderModal.addEventListener('click', openModal);\nrefs.closeModalSliderBtn.addEventListener('click', toggleModal);\nrefs.backdropSlider.addEventListener('click', onBackdropClick);\n\nfunction openModal(evt) {\n  if (evt.currentTarget === evt.target) {\n    return;\n  }\n  document.querySelector('.wrap-disc').innerHTML = '';\n\n  const currentFilm = evt.target.closest('.js-item');\n  const currentId = Number(currentFilm.dataset.id);\n  fetchModal(currentId)\n    .then(data => {\n      renderMarkupModal(data);\n    })\n    .finally(() => spinnerOff());\n  spinnerOn();\n\n  refs.trailerBtn.addEventListener('click', () => fetchTrailer(currentId), {\n    once: true,\n  });\n\n  toggleModal();\n}\n\nfunction toggleModal() {\n  window.addEventListener('keydown', onEscPress);\n  refs.modalFilm.classList.toggle('is-hidden');\n  refs.body.classList.toggle('no-scroll');\n  if (refs.modalFilm.classList.contains('is-hidden')) {\n    window.removeEventListener('keydown', onEscPress);\n  }\n}\n\nfunction onBackdropClick(evt) {\n  if (evt.currentTarget === evt.target) {\n    toggleModal();\n  }\n}\n\nfunction onEscPress(evt) {\n  if (evt.key === 'Escape') {\n    toggleModal();\n  }\n}\n\n// щоб трейлер закривався при закритті модалки\nrefs.closeModalBtn.addEventListener('click', () => {\n  document.querySelector('.modal-trailer')\n    ? (document.querySelector('.modal-trailer').innerHTML = '')\n    : null;\n});\n"],"names":["$99kNq","parcelRequire","$b2300dc3ae79c9b2$var$toggleModal","window","addEventListener","$b2300dc3ae79c9b2$var$onEscPress","$krGWQ","refs","modalFilm","classList","toggle","body","contains","removeEventListener","evt","key","sliderModal","currentTarget","target","document","querySelector","innerHTML","currentFilm","closest","currentId","Number","dataset","id","$79xYC","fetchModal","then","data","renderMarkupModal","finally","$04jNI","spinnerOff","spinnerOn","trailerBtn","$I2Abx","fetchTrailer","once","closeModalSliderBtn","backdropSlider","closeModalBtn"],"version":3,"file":"my-library.b714725a.js.map"}